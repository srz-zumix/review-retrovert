ARG REVIEW_VERSION=latest
FROM vvakame/review:${REVIEW_VERSION}

# Copy source code and build from local workspace
COPY . /tmp/review-retrovert/

# Build and install from local source
RUN cd /tmp/review-retrovert && \
    gem build review-retrovert.gemspec && \
    gem install --no-document review-retrovert-*.gem && \
    gem list review-retrovert && \
    which review-retrovert && \
    ls -la $(which review-retrovert) && \
    rm -rf /tmp/review-retrovert

ENTRYPOINT [ "review-retrovert" ]
